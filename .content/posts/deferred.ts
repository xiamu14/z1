export default {
  "filePath": "/Users/ben/Documents/workspace/project/z1/posts/deferred.md",
  "content": "<h3>自定义 deferred 函数，手动控制 resolve 和 reject</h3>\n<p>在 JavaScript 异步编程中，Promise 是核心工具，但有时我们需要更灵活的控制权。Deferred（延迟对象）让开发者能够在任意时机手动调用 resolve 或 reject，非常适合用于测试场景或处理不直接返回 Promise 的异步操作。代码如下：</p>\n<pre class=\"shiki shiki-themes min-light min-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#1f1f1f;color:#24292eff;--shiki-dark:#b392f0\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">type</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Code</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\"> =</span><span style=\"color:#22863A;--shiki-dark:#FFAB70\"> 'CANCELLED'</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\"> |</span><span style=\"color:#22863A;--shiki-dark:#FFAB70\"> 'TIMEOUT'</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">;</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">type</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> CancelError</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\"> =</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Error</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\"> &#x26;</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> { code</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">?:</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Code</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">; reason</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">?:</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> string</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> };</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">function</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> deferred</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">&#x3C;</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">T</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">>(timeout</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">?:</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> number</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">) {</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">  let</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> _resolve</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">!:</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> (value</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">:</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> T</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\"> |</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> PromiseLike</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">&#x3C;</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">T</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">>) </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=></span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> void</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">;</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">  let</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> _reject</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">!:</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> (reason</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">?:</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> unknown</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">) </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=></span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> void</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">;</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">  let</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> _cancel</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">!:</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> (reason</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">?:</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> string</span><span style=\"color:#212121;--shiki-dark:#BBBBBB\">,</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> code</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">?:</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Code</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">) </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=></span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> void</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">;</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">  let</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> isCancelled </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> false</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">;</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">  let</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> cancelReason</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">:</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> string</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\"> |</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> undefined</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">;</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">  let</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> cancelCode</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">:</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> string</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\"> |</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> undefined</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">;</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">  let</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> timer</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">:</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> ReturnType</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">&#x3C;</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">typeof</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> setTimeout> </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">|</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> undefined</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">  const</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> promise</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\"> =</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\"> new</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> Promise</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">&#x3C;</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">T</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">>((resolve</span><span style=\"color:#212121;--shiki-dark:#BBBBBB\">,</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> reject) </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=></span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> {</span></span>\n<span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">    _resolve</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\"> =</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> (value) </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=></span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> {</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">      if</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> (</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">!</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">isCancelled) {</span></span>\n<span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">        clearTimeout</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">(timer);</span></span>\n<span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">        resolve</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">(value);</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">      }</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">    };</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">    _reject</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\"> =</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> (err) </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=></span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> {</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">      if</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> (</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">!</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">isCancelled) {</span></span>\n<span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">        clearTimeout</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">(timer);</span></span>\n<span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">        reject</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">(err);</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">      }</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">    };</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">    _cancel</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\"> =</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> (reason </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=</span><span style=\"color:#22863A;--shiki-dark:#FFAB70\"> 'Manual cancelled'</span><span style=\"color:#212121;--shiki-dark:#BBBBBB\">,</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> code </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=</span><span style=\"color:#22863A;--shiki-dark:#FFAB70\"> 'CANCELLED'</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">) </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=></span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> {</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">      if</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> (</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">!</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">isCancelled) {</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">        isCancelled </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> true</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">;</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">        cancelReason </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> reason;</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">        cancelCode </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> code;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">        clearTimeout</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">(timer);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">        const</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> err</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\"> =</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\"> new</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> Error</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">(reason) </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">as</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> CancelError</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">;</span></span>\n<span class=\"line\"><span style=\"color:#1976D2;--shiki-dark:#79B8FF\">        err</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">.code </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> code;</span></span>\n<span class=\"line\"><span style=\"color:#1976D2;--shiki-dark:#79B8FF\">        err</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">.reason </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> reason;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">        reject</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">(err);</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">      }</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">    };</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">    if</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> (timeout </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">!=</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> null</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">) {</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">      timer </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> setTimeout</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">(() </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=></span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> {</span></span>\n<span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">        _cancel</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">(</span><span style=\"color:#22863A;--shiki-dark:#FFAB70\">`Timeout after </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">${</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">timeout</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">}</span><span style=\"color:#22863A;--shiki-dark:#FFAB70\">ms`</span><span style=\"color:#212121;--shiki-dark:#BBBBBB\">,</span><span style=\"color:#22863A;--shiki-dark:#FFAB70\"> 'TIMEOUT'</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">);</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">      }</span><span style=\"color:#212121;--shiki-dark:#BBBBBB\">,</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> timeout);</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">    }</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">  return</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">    promise</span><span style=\"color:#212121;--shiki-dark:#BBBBBB\">,</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">    resolve</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">:</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> _resolve</span><span style=\"color:#212121;--shiki-dark:#BBBBBB\">,</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">    reject</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">:</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> _reject</span><span style=\"color:#212121;--shiki-dark:#BBBBBB\">,</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">    cancel</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">:</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> _cancel</span><span style=\"color:#212121;--shiki-dark:#BBBBBB\">,</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">    get</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> cancelled</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">() {</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">      return</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> isCancelled;</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">    }</span><span style=\"color:#212121;--shiki-dark:#BBBBBB\">,</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">    get</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> reason</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">() {</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">      return</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> cancelReason;</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">    }</span><span style=\"color:#212121;--shiki-dark:#BBBBBB\">,</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">    get</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> code</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">() {</span></span>\n<span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">      return</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> cancelCode;</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">    }</span><span style=\"color:#212121;--shiki-dark:#BBBBBB\">,</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">  };</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">}</span></span></code></pre>\n<p>使用案例:</p>\n<pre class=\"shiki shiki-themes min-light min-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#1f1f1f;color:#24292eff;--shiki-dark:#b392f0\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#D32F2F;--shiki-dark:#F97583\">const</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\"> d1</span><span style=\"color:#D32F2F;--shiki-dark:#F97583\"> =</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> deferred</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">&#x3C;</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\">string</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">>();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">setTimeout</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">(() </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=></span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> {</span></span>\n<span class=\"line\"><span style=\"color:#1976D2;--shiki-dark:#79B8FF\">  d1</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">.resolve</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">(</span><span style=\"color:#22863A;--shiki-dark:#FFAB70\">'12'</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">);</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">}</span><span style=\"color:#212121;--shiki-dark:#BBBBBB\">,</span><span style=\"color:#1976D2;--shiki-dark:#F8F8F8\"> 2000</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1976D2;--shiki-dark:#79B8FF\">d1</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">.</span><span style=\"color:#1976D2;--shiki-dark:#79B8FF\">promise</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">.then</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">((value) </span><span style=\"color:#D32F2F;--shiki-dark:#F97583\">=></span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\"> {</span></span>\n<span class=\"line\"><span style=\"color:#1976D2;--shiki-dark:#79B8FF\">  console</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">.log</span><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">(value);</span></span>\n<span class=\"line\"><span style=\"color:#24292EFF;--shiki-dark:#B392F0\">});</span></span></code></pre>",
  "fileName": "deferred",
  "subject": [],
  "md5": "522cdb32d786f44b397a1cb888e4e38a",
  "id": "qiuSCW",
  "frontMatter": {
    "title": "Deferred：手动控制 Promise 的解决与拒绝",
    "description": "Deferred 函数让开发者可以灵活地在合适的时机手动触发 Promise 的 resolve 或 reject。",
    "cover": "https://images.unsplash.com/photo-1595716887117-fd1add22a29b?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
  },
  "updateAt": 1758938107717
}